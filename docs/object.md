# 存储目标

## 现状

- 余额的显示
  
  假设目前的总高度为12000，我的第一笔交易发生在9000，我目前的同步高度为3000.
  
  此时你的未来账户会显示你将来`可能`的余额。本地显示余额为0，只能你同步到12000，才能拿到实际的余额。
  
  你的未来账户与实际的余额是有差异的，问题出现在了投票上，假设你在12000进行了投票，并且能够获取到奖励，那么你的实际余额为（获得的转账收益+投票的奖励收益），但实际只会显示你获得的转账收益。投票那部分收益要等到你同步到那部分区块并重放交易才能获取得到。
  
  **总体来说：是先显示本地同步到的余额，然后异步去获取pc的未来账户余额，然后等到你同步完所有区块并重放才能获取到实际余额**
  
  ** pc节点会把所有的账户缓存到一个内存地址，客户端访问直接去缓存获取并返回。

## 目标

- 余额的显示

目前的话当一个账户发生了一笔交易，在交易的那条数据会有个`change`属性来存放账户余额的变动，所以后续的余额显示可以是：获取到最后一个发生交易的区块（访问change属性），获取到转账余额，然后重放这个区块（获取是否有投票收益），并显示实际余额。

总体来说：只要能获取到最后一次发生交易的区块就可以获取到实际余额了。所以操作就可以由原来的访问pc的接口，变成了下载交易。

- 下载交易的具体实现：
  
  下载账本，通过账本知道最后一个发生交易的区块以及交易索引，知道余额，通过重放交易来获取实际的余额。

## 账本

账本含有所有人的状态信息

- 交易索引（所有交易发生的位置，那个高度+第几个交易）这个索引会很长

- 余额
